package org.zerock.me.web;

import java.util.List;

import javax.servlet.http.HttpSession;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.zerock.me.dao.BoardDao;
import org.zerock.me.dao.LessonDao;
import org.zerock.me.domain.Board;
import org.zerock.me.domain.Member;

@Controller
@RequestMapping("/board")
public class BoardController {
	
	BoardDao boardDao; 
	LessonDao lessonDao;
	
	  public BoardController(BoardDao boardDao, LessonDao lessonDao) {
		    this.boardDao = boardDao;
		    this.lessonDao = lessonDao;
		  }
	
	@RequestMapping("add")
	public String add(Board board, HttpSession session) throws Exception {
		
		Member loginUser = (Member) session.getAttribute("loginUser");
		board.setWriterNo(loginUser.getNo());
		boardDao.insert(board);
		return "redirect:list";

	}
	@RequestMapping("delete")
	public void delete(int no, Model model) throws Exception{
		
		model.addAttribute("count", boardDao.delete(no));
		
	}
	
	@RequestMapping("detail")
	public void detail(int no, Model model) throws Exception{
		Board board = boardDao.findByNo(no);
		model.addAttribute("board", board);
		
	}
	
	@RequestMapping("list")
	public void list(Model model) throws Exception{
		List<Board> list = boardDao.findAll();
		model.addAttribute("list", list);
		
	}
	
	@RequestMapping("form")
	public void form(HttpSeesion session, Model model) throws Exception{
		
	}
	
	
	
	

	
	 @RequestMapping("update")
	 public String update(Board board)throws Exception{
		 
		 
		 

	 }
	
	
	

}
